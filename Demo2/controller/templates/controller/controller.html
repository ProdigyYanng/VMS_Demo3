<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <title>首页界面</title>

    <link rel="stylesheet" href="{% static "controller/css/base.css" %}">
</head>

<body>
<!--顶部-->
<header class="header left">
    <div class="left nav">
        <ul>
            <li></li>
            <!-- <li><i class="nav_2"></i><a href="carContrl.html">车辆监控</a> </li> -->
            <!-- <li><i class="nav_3"></i><a href="map.html">地图界面</a> </li> -->
        </ul>
    </div>
    <div class="header_center left">
        <h2><strong>无人车智能管理系统</strong></h2>
        <p class="color_font"><small>Unmanned vehicle intelligent management system</small></p>
    </div>
    <div class="right nav text_right">
        <ul>
            <!-- <li><i class="nav_7"></i><a href="static.html">查询统计</a> </li> -->
                        <li><i class="nav_8"></i><a href="{% url "login:index" %}">退出</a></li>
            <!-- <li><i class="nav_4"></i><a href="table1.html">表格界面</a> </li> -->
        </ul>
    </div>
    <!--<nav class="left nav">-->
    <!--<ul>-->
    <!--<li class="nav_active"><i class="nav_1"></i><a href="index.html">数据概览</a> </li>-->
    <!--<li><i class="nav_2"></i><a href="carContrl.html">车辆监控</a> </li>-->
    <!--<li><i class="nav_3"></i><a href="map.html">地图界面</a> </li>-->
    <!--<li><i class="nav_4"></i><a href="javascript:void(0)">表格界面</a><ul class="li_ul">-->
    <!--<li><a href="table1.html">表格一</a> </li>-->
    <!--<li><a href="table2.html">表格二</a> </li>-->

    <!--</ul> </li>-->
    <!--&lt;!&ndash;<li><i class="nav_5"></i><a href="#">车载视频</a> </li>&ndash;&gt;-->
    <!--&lt;!&ndash;<li><i class="nav_6"></i><a href="#">视频监控</a> </li>&ndash;&gt;-->
    <!--<li><i class="nav_7"></i><a href="static.html">查询统计</a> </li>-->
{#    <li><i class="nav_8"></i><a href="{% url "login:index" %}">登出</a> </li>#}
    <!--</ul>-->
    <!--</nav>-->
</header>
<!--内容部分-->
<div class="con left">
    <!--选择时间-->
    <div class="select_time">
        <div class="static_top left">
            <i></i><a href="{% url 'controller:index' %}" style="color: #25f3e6;">总体概况</a>
        </div>
        <div class="static_top left">
            <i></i>
            <a href="CRUD" style="color: #25f3e6;">信息录入</a>
            {#            <a onclick="redict()"  style="color: #25f3e6;">信息录入</a>#}
        </div>
    </div>
    {#    <div class="select_time" style="float: left">#}
    {#        <div class="static_top left">#}
    {#            <i></i><span>总体概况</span>#}
    {#        </div>#}
    {#    </div>#}
    <!--数据总概-->
    <div class="con_div">
        <div class="con_div_text left">
            <div class="con_div_text01 left">
                <img src="{% static "controller/img/info_1.png" %}" class="left text01_img">
                <div class="left text01_div">
                    <p>车辆总数(辆)</p>
                    <p>{{ CarsNum }}</p>
                </div>
            </div>
            <div class="con_div_text01 right">
                <img src="{% static "controller/img/info_2.png" %}" class="left text01_img">
                <div class="left text01_div">
                    <p>车辆使用数(辆)</p>
                    <p>{{ CarsUsedNum }}</p>
                </div>
            </div>
        </div>
        <div class="con_div_text left">
            <div class="con_div_text01 left">
                <img src="{% static "controller/img/info_4.png" %}" class="left text01_img">
                <div class="left text01_div">
                    <p>行驶里程总数(km)</p>
                    <p class="sky">{{ CarsMileageNum }}</p>
                </div>
            </div>
            <div class="con_div_text01 right">
                <img src="{% static "controller/img/info_5.png" %}" class="left text01_img">
                <div class="left text01_div">
                    <p>行驶里程平均数(km)</p>
                    <p class="sky">{{ CarsMileageAverNum }}</p>
                </div>
            </div>
        </div>
        <div class="con_div_text left">

            <div class="con_div_text01 left">
                <img src="{% static "controller/img/info_6.png" %}" class="left text01_img">
                <div class="left text01_div">
                    <p>行驶时长总数(s)</p>
                    <p class="org">{{ CarsTimeNum }}</p>
                </div>
            </div>
            <div class="con_div_text01 right">
                <img src="{% static "controller/img/info_7.png" %}" class="left text01_img">
                <div class="left text01_div">
                    <p>行驶平均数(s)</p>
                    <p class="org">{{ CarsAverTimeNum }}</p>
                </div>
            </div>
        </div>
    </div>
    <!--统计分析图-->
    <div class="div_any">
        <div class="left div_any01">
            <div class="div_any_child">
                <div class="div_any_title"><img src="{% static "controller/img/title_1.png" %}">管理员信息</div>
                <!-- 管理员信息展示 -->
                <div style="width: 60px;height:60px;padding: 10px;margin: 40px auto 10px;">
                    <img src="{% static "controller/img/touxiang.png" %}" alt="" style="width:60px; height:60px">
                </div>

                <div style="padding: 10px;margin-left: 40px;color: #ffffff;">您的身份：{{ UserIdentity }}</div>
                <div style="padding: 10px;margin-left: 40px;color: #ffffff;">您的昵称：{{ UserName }}</div>
                <div style="padding: 10px;margin-left: 40px;color: #ffffff;">注册时间：{{ date }}</div>

            </div>
            <div class="div_any_child">
                <div class="div_any_title"><img src="{% static "controller/img/title_2.png" %}">车辆总览信息</div>
                <div class="table_p">
                    <table>
                        <thead>
                        <tr>
                            <th>序号</th>
                            <th>车牌号</th>
                            <th>剩余电量</th>
                            <th>查看详情</th>
                        </tr>
                        </thead>
                        <tbody>

                        {% for car in all_cars %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ car.Car_License }}</td>
                                <td>{{ car.Car_Electric_Quantity }}</td>
                                <td>
                                    <button id="MoreBtn" class="btn btn-danger btn-sm">详情</button>
                                </td>
                            </tr>
                        {% endfor %}

                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>98</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>98</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>98</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}


                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="div_any02 left ">
            <div class="div_any_child div_height">
                <div class="div_any_title any_title_width"><img src="{% static "controller/img/title_3.png" %}">车辆行驶地图
                </div>
                <!-- <div id="map_div"></div> -->
                <div id="container" style="width: 100%;height: 100%;"></div>
            </div>
        </div>
        <div class="right div_any01">

            <!-- <div class="div_any_child">
                <div class="div_any_title"><img src="img/title_5.png">车辆报警统计 </div>
                <p id="char4" class="p_chart"></p>
            </div> -->
            <div class="div_any_child">
                <div class="div_any_title"><img src="{% static "controller/img/title_4.png" %}">可约车辆</div>
                <div class="table_p">
                    <table>
                        <thead>
                        <tr>
                            <th>序号</th>
                            <th>车牌号</th>
                            <th>剩余电量</th>
                            <th>查看详情</th>
                        </tr>
                        </thead>
                        <tbody>

                        {% for car in CarsCanUse %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ car.Car_License }}</td>
                                <td>{{ car.Car_Electric_Quantity }}</td>
                                <td>
                                    <button id="MoreBtn" class="btn btn-danger btn-sm">详情</button>
                                </td>
                            </tr>
                        {% endfor %}


                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>134.2</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>134.2</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>134.2</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}


                        </tbody>
                    </table>
                </div>

            </div>

            <div class="div_any_child">
                <div class="div_any_title"><img src="{% static "controller/img/title_4.png" %}">故障车辆</div>
                <div class="table_p">
                    <table>
                        <thead>
                        <tr>
                            <th>排名</th>
                            <th>车牌号</th>
                            <th>剩余电量</th>
                            <th>查看详情</th>
                        </tr>
                        </thead>
                        <tbody>


                        {% for record in all_FailureRecords %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ record.Car_id.Car_License }}</td>
                                <td>{{ record.Car_id.Car_Electric_Quantity }}</td>
                                <td>
                                    <button id="MoreBtn" class="btn btn-danger btn-sm" onclick = "window.location.href = '{% url "controller:CRUD" %}?id=2'">详情</button>
                                </td>
                            </tr>
                        {% endfor %}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>134.2</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>134.2</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>134.2</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>134.2</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        {#                                <tr>#}
                        {#                                    <td>1</td>#}
                        {#                                    <td>京A12345</td>#}
                        {#                                    <td>134.2</td>#}
                        {#                                    <td><a href="#">详情</a></td>#}
                        {#                                </tr>#}
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>

    <script src="{% static "controller/js/jquery/jQuery-2.2.0.min.js" %}"></script>
    <script src="{% static "controller/js/echarts-all.js" %}"></script>
    <script src="{% static "controller/js/base.js" %}"></script>
    <script src="{% static "controller/js/index.js" %}"></script>

    <!-- 百度地图 -->
    {#    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=5ieMMexWmzB9jivTq6oCRX9j&callback">#}
    {#    </script>#}
    {#    <script src="js/map.js"></script>#}

    <!-- 高德地图 -->
    {#    <script src="https://webapi.amap.com/maps?v=1.4.15&key=c16dc4b9a093cc94d9f36e00e7bc2fd0"></script>#}
    <script src='https://webapi.amap.com/maps?v=2.0&key=c16dc4b9a093cc94d9f36e00e7bc2fd0'
            type="text/javascript"></script>

    {#    导入高德地图API#}
    <script type="text/javascript">
        // todo 学习点：django把数据传到外部js的方法是  先在html中的script标签把数据渲染成js对象 然后 就可以在外部js文件中进行使用
        // todo 需要的参数有：可约车辆、故障车辆 的  分别的坐标、 然后在js中添加marker 逻辑是：点击详情就自动缩放到该车辆的marker

        var CarsNum ={{ CarsNum }}; // 汽车数量
        var CarsPos = {};
        {% for car in CarsAllInfo %}
            var carid = {{ car.Car_id }};
            var carPosX = {{ car.Car_Current_PosX }};
            var carPosY = {{ car.Car_Current_PosY }};
            var carIsUse = '{{ car.Car_IsUse }}';
            var carLicense = '{{ car.Car_License }}';
            var carEQ = {{ car.Car_Electric_Quantity }};
            var carPosInfo = {
                'carid': carid,
                'carPosX': carPosX,
                'carPosY': carPosY,
                'carIsUse': carIsUse,
                'carLicense': carLicense,
                'carEQ': carEQ,
            };


            CarsPos[{{ forloop.counter }} -1] = carPosInfo;
        {% endfor %}
        var Display_Cals_Num = {{ Display_Cals_Num }};
        var CarsCanUseNum = {{ CarsCanUseNum }};
        var Display_FailureRecords_Num = {{ Display_FailureRecords_Num }};

    </script>
    <script src="{% static "controller/js/controller.js" %}" type="text/javascript"></script>
</body>

</html>